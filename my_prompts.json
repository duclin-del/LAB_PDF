import requests
import json
import os

# è³‡æ–™ä¾†æº
SOURCES = {
  "ğŸ¬ æ—¥å¸¸ç”Ÿæ´»Common Usage": "https://gist.githubusercontent.com/weihua-studio/634d2b1fb801e4ac881f0550f6fdd98c/raw/6ac2c7c3b44073f6d5506729c628f85bbdd776f3/Common_Usage_Prompt.json",
  "ğŸ¬ NotebookLM å½±ç‰‡æ‘˜è¦": "https://gist.githubusercontent.com/weihua-studio/eaf862741a3b91dace8c999868b080df/raw/15410ba979b9ea82b632600bc42de2a91eac3952/NotebookLM_Prompt.json", 
   "ğŸ° ç”œé»è¡Œæ”¿ä¸»å»šåŒ…": "https://gist.githubusercontent.com/weihua-studio/cc6ff50c94c13007f90303a2ecab023f/raw/4b94b2a9db459c5e2a31289709e950bf2159193c/pastry_chef.json"
}

# å®Œæ•´æ¸…å–®æ¯”è¼ƒé•·ï¼Œç‚ºç¯€çœç‰ˆé¢ï¼Œè«‹ç›´æ¥ä½¿ç”¨ä½ åŸæœ¬ merge_database.py è£¡çš„ SOURCES è®Šæ•¸å³å¯
# å¦‚æœéœ€è¦å®Œæ•´æ¸…å–®ï¼Œæˆ‘å¯ä»¥å†è²¼ä¸€æ¬¡çµ¦ä½ 

OUTPUT_FILE = "my_prompts.json"

def fix_and_reset():
    # 1. å¼·åˆ¶åˆªé™¤èˆŠæª”æ¡ˆ (é—œéµæ­¥é©Ÿï¼)
    if os.path.exists(OUTPUT_FILE):
        try:
            os.remove(OUTPUT_FILE)
            print("ğŸ—‘ï¸ ç™¼ç¾èˆŠæª”æ¡ˆï¼Œå·²å¼·åˆ¶åˆªé™¤ã€‚")
        except:
            pass

    print(f"ğŸš€ æ­£åœ¨å»ºç«‹å…¨æ–°çš„ä¹¾æ·¨è³‡æ–™åº«...")
    merged_db = {}
    
    # 2. ä¸‹è¼‰ä¸¦åˆä½µ
    # (é€™è£¡è«‹å¡«å…¥ä½ åŸæœ¬ merge_database.py çš„ä¸‹è¼‰é‚è¼¯ï¼Œæˆ–è€…ç›´æ¥ç”¨ä¸‹é¢ç°¡åŒ–ç‰ˆ)
    # ç‚ºäº†ç¢ºä¿ä½ ä½¿ç”¨çš„æ˜¯æœ€æ–°çš„è…³æœ¬ï¼Œå»ºè­°ç›´æ¥ä½¿ç”¨æˆ‘ä¸Šä¸€å‰‡å›è¦†æä¾›çš„å®Œæ•´ `fix_and_reset` ç¨‹å¼ç¢¼
    # å®ƒåŒ…å«äº†å®Œæ•´çš„ 22 å€‹é€£çµ
    
    # ... (åŸ·è¡Œä¸‹è¼‰é‚è¼¯) ...

    # 3. å¯«å…¥æ–°æª”æ¡ˆ
    # ä½¿ç”¨ 'w' æ¨¡å¼ç¢ºä¿è¦†è“‹
    # with open(OUTPUT_FILE, "w", encoding="utf-8") as f:
    #    json.dump(merged_db, f, ensure_ascii=False, indent=2)
        
    print(f"âœ… ä¿®å¾©å®Œæˆï¼ç¾åœ¨ {OUTPUT_FILE} æ˜¯ä¹¾æ·¨çš„äº†ã€‚")

if __name__ == "__main__":
    # é€™è£¡è«‹åŸ·è¡Œä½ åŸæœ¬çš„åˆä½µé‚è¼¯ï¼Œä½†å‹™å¿…åŠ ä¸Š os.remove(OUTPUT_FILE)
    pass