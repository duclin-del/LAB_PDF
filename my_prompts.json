import requests
import json
import os

# é€™æ˜¯ä½ çš„å®Œæ•´è³‡æ–™ä¾†æº
SOURCES = {
  "ğŸ¬ æ—¥å¸¸ç”Ÿæ´»Common Usage": "https://gist.githubusercontent.com/weihua-studio/634d2b1fb801e4ac881f0550f6fdd98c/raw/6ac2c7c3b44073f6d5506729c628f85bbdd776f3/Common_Usage_Prompt.json",
  "ğŸ¬ NotebookLM å½±ç‰‡æ‘˜è¦": "https://gist.githubusercontent.com/weihua-studio/eaf862741a3b91dace8c999868b080df/raw/15410ba979b9ea82b632600bc42de2a91eac3952/NotebookLM_Prompt.json", 
  "ğŸ¬ NotebookLM è‡ªè¨‚ç°¡å ±": "https://gist.githubusercontent.com/weihua-studio/088c5a81fb9b14f9b367ae6dec561677/raw/50de2d62726066b5c59f64491ec86a40073cf9ea/NotebookLM_Presentation_Ultimate.json", 
  "ğŸ¬ NotebookLM èªéŸ³æ‘˜è¦": "https://gist.githubusercontent.com/weihua-studio/130a050b569743aa7b593af594653269/raw/c718ba1890840ac35f7fe1ccc161868505f249b0/NotebookLM_Audio_Ultimate.json", 
  "ğŸ¬ NotebookLM è‡ªè¨‚å­¸ç¿’å¡": "https://gist.githubusercontent.com/weihua-studio/78c040eb1caece86cea73154c337ba91/raw/339b0ac4dfb7e464b6819a5bad26d703adbdaa4a/study_card_prompt.json",
  "ğŸ¬ NotebookLM è‡ªè¨‚è³‡æ–™è¡¨": "https://gist.githubusercontent.com/weihua-studio/f6445a50b72ce54cbce8239c1359aecd/raw/b240b874e76d40480806e676443642066e3d327b/NotebookLm_DataTable_Prompt.json",
  "ğŸ¬ NotebookLM è‡ªè¨‚è³‡è¨Šåœ–è¡¨": "https://gist.githubusercontent.com/weihua-studio/0a97e5c9766aca663eea618149260a5a/raw/411c6ce8c9a2c214a2b86f3eb132ad52c265e820/NotebookLM_infografic_prompt.json",
  "ğŸ¬ NotebookLM è‡ªè¨‚æ¸¬é©—": "https://gist.githubusercontent.com/weihua-studio/92b83f90c4b89aef961f6b6e4f7fbe92/raw/2b5519f6b7610011daffa299543e3b20c7753305/NotebookLM_Prompt_Test.json",
  "ğŸ‘” å…¨çƒé¢è©¦é€šé—œå¯†ç¢¼": "https://gist.githubusercontent.com/weihua-studio/87a5901f01fb64ebfa545dc2756f88bc/raw/b0c84feef85484a81762f92e70b70837ab9f1bdb/cn_GlobalInterview.JSON",
  "ğŸ§© éˆé­‚æƒæå„€": "https://gist.githubusercontent.com/weihua-studio/0bcb50cf1ac66db31629ce82e98bac12/raw/6184f067d2c339037d7bd5797f0ab606b787ea58/cn_SoulScanner.JSON",
  "ğŸŒ AI ç’°çƒæ—…è¡Œè¦åŠƒå¸«": "https://gist.githubusercontent.com/weihua-studio/7101dd404a44e05ecb010a917a6ba6ac/raw/a6562d1518d2e0de6f7becb924b23f234a0f2f6e/cn_TravelPlanner.JSON",
  "ğŸ”® å‘½é‹æ™ºå›Šåœ˜": "https://gist.githubusercontent.com/weihua-studio/d75d17cf23e202c7d8fa4b6d24ed2698/raw/79dc98b701f9c406f28adc5f4bae19a5057bcb57/cn_destiny.JSON",
  "ğŸŒ è‹±èªç’°éŠä¸–ç•Œ": "https://gist.githubusercontent.com/weihua-studio/20ddf55b75b1faf2cc69379b7689c781/raw/ca58f8a2487042fb417c92a87b14e4da474ac27c/cn_englishworld.json",
  "ğŸ‘¶ å…¨æ–¹ä½è‚²å…’å¯¶å…¸": "https://gist.githubusercontent.com/weihua-studio/d75c85d7a8a1d94c6195b59457503f7f/raw/6bffcb381f14bd0976c54b3b816276dddef4540e/cn_kids.JSON",
  "ğŸ’° å‰å¤§çš„æŠ•è³‡äºº": "https://gist.githubusercontent.com/weihua-studio/c5ed03f28b66de8499e96370b1a7bea5/raw/96550e8374b1bb4f0379934310faaa84eef6396f/cn_timeless_mentors.json",
  "ğŸ¹ Suno éŸ³æ¨‚éˆæ„Ÿå¤§å¸«": "https://gist.githubusercontent.com/weihua-studio/4ea88129207132a27c34649edb91f686/raw/957e9de599202ab154a79829b4c00c6c8f75425c/suno_music_master.json",
  "ğŸ•µï¸ 2026 AI è¶¨å‹¢æˆ°æƒ…å®¤": "https://gist.githubusercontent.com/weihua-studio/a0c777dad5e47c86baaaf457d18944f1/raw/b5ac76e4ae41d06441a8fba78f46eb7d45f63eb3/global_ai_radar_2026.json",
  "ğŸ‰ ä¸‰åœ‹å…¨æ–¹ä½å°å¹«æ‰‹": "https://gist.githubusercontent.com/weihua-studio/52e1af675ca2e26b75e6b4c231d80851/raw/3113a94cfd5d079d56c3e9af2dd78e359ee2e207/three_kingdoms_omniverse.json",
  "ğŸ§˜ è·¨æ™‚ç©ºéˆé­‚å°å¸«": "https://gist.githubusercontent.com/weihua-studio/7800014aec21983b5ffbaeaf745d549c/raw/d1812f0254928b26e9bf68bda508851543c756ad/timeless_mentors.json",
  "ğŸ¬ YouTuber å‰µä½œè€…åŒ…": "https://gist.githubusercontent.com/weihua-studio/d5bdb4b00b5a7d8a20bc2b186417f3ad/raw/363d96d69aae8c45306449140d71624e0fa90871/youtube_Prompt.json",
  "ğŸ¬ AI_Video_å°æ¼”": "https://gist.githubusercontent.com/weihua-studio/52defa2566476c23322914b0df8c3dfe/raw/ac615f69e7cf45f675c51301eafea62698790812/Common_Usage_Prompt.json",
  "ğŸ° ç”œé»è¡Œæ”¿ä¸»å»šåŒ…": "https://gist.githubusercontent.com/weihua-studio/cc6ff50c94c13007f90303a2ecab023f/raw/4b94b2a9db459c5e2a31289709e950bf2159193c/pastry_chef.json"
}

OUTPUT_FILE = "my_prompts.json"

def fix_and_reset():
    # 1. å¼·åˆ¶åˆªé™¤èˆŠæª”æ¡ˆ
    if os.path.exists(OUTPUT_FILE):
        try:
            os.remove(OUTPUT_FILE)
            print("ğŸ—‘ï¸ èˆŠçš„ææ¯€æª”æ¡ˆå·²åˆªé™¤ã€‚")
        except:
            pass

    print(f"ğŸš€ æ­£åœ¨é‡æ–°ä¸‹è¼‰ä¸¦å»ºç«‹ä¹¾æ·¨çš„è³‡æ–™åº«...")
    merged_db = {}
    
    # 2. ä¸‹è¼‰ä¸¦åˆä½µ
    for name, url in SOURCES.items():
        try:
            r = requests.get(url, timeout=10)
            if r.status_code == 200:
                data = r.json()
                content = data.get("roles", data)
                merged_db.update(content)
        except:
            pass # å¿½ç•¥éŒ¯èª¤ï¼Œç¢ºä¿æµç¨‹ç¹¼çºŒ

    # 3. å¯«å…¥æ–°æª”æ¡ˆ (ç¢ºä¿æ ¼å¼æ­£ç¢º)
    with open(OUTPUT_FILE, "w", encoding="utf-8") as f:
        json.dump(merged_db, f, ensure_ascii=False, indent=2)
        
    print(f"âœ… ä¿®å¾©å®Œæˆï¼è«‹å‹™å¿…å°‡é€™å€‹æ–°ç”¢ç”Ÿçš„ {OUTPUT_FILE} ä¸Šå‚³åˆ° GitHubã€‚")

if __name__ == "__main__":
    fix_and_reset()